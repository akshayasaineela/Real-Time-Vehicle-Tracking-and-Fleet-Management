<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register â€¢ FleetTrack</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="auth-wrapper">
    <div class="auth-box">
        <h2 class="auth-title">Create Account</h2>
        <p class="auth-subtitle">Register your company with FleetTrack</p>

        <input type="text" placeholder="Company Name" class="auth-input">
        <input type="text" placeholder="Admin Full Name" class="auth-input">
        <input type="email" placeholder="Email Address" class="auth-input">
        <input type="password" placeholder="Password" class="auth-input">
        <input type="password" placeholder="Confirm Password" class="auth-input">

        <button class="auth-btn">Register</button>

        <div class="auth-footer">
            Already have an account?
            <a href="login.html">Login</a>
        </div>
    </div>
</div>

<script>
document.querySelector(".auth-btn").addEventListener("click", async () => {
    const inputs = document.querySelectorAll(".auth-input");

    const company = inputs[0].value.trim();
    const adminName = inputs[1].value.trim();
    const email = inputs[2].value.trim();
    const password = inputs[3].value;
    const confirmPassword = inputs[4].value;

    // Validate fields
    if (!company || !adminName || !email || !password || !confirmPassword) {
        alert("All fields are required");
        return;
    }

    if (password !== confirmPassword) {
        alert("Passwords do not match");
        return;
    }

    const res = await fetch("http://localhost:5000/api/auth/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ company, adminName, email, password })
    });

    const data = await res.json();
    
    alert(data.message);

    if (data.success) {
        // Redirect to login page
        window.location.href = "login.html";
    }
});
</script>

</body>
</html>
